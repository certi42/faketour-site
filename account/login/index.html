<!DOCTYPE html>
<html>
<head>
    <title>Log In</title>
    <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/menu/styles.css">
	<script type="text/javascript" src="/menu/loadMenu.js"></script>
</head>
<iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe" style="display:none;"></iframe>

<body>
<div class="topnav"></div>
<div class="content"></div>
<script type="text/javascript">loadMenu("Log In");</script>
<h2>Login Form</h2>
<form onsubmit="login();" target="dummyframe">
	<div class="imgcontainer">
		<img src="login_avatar.png" alt="Avatar" class="avatar">
	</div>
    <p id="incorrect" style="text-align:center;color:red"></p>
	<div class="container">
		<label for="uname"><b>Username</b></label>
		<input id="uname" type="text" placeholder="Enter Username" name="uname" required>
		<label for="psw"><b>Password</b></label>
		<input id="psw" type="password" placeholder="Enter Password" name="psw" required>
		<button  type="submit">Login</button>
	</div>
</form>
<div class="footer">
  <p onclick='window.location.href = "https://twitter.com/DaarkenArt"'>Artwork by @DaarkenArt</p>
</div>
<script>
    function login() {
        let button = document.getElementById("submit");
        let uname = document.getElementById("uname").value;
        let psw = document.getElementById("psw").value;
        let loggedIn = JSON.parse(getData("login.php?uname=" + uname + "&psw=" + psw));
        if(loggedIn) {
            history.go(-1);
//            window.location.href = window.location.origin;
        } else {
            let incorrect = document.getElementById("incorrect");
            incorrect.innerHTML = "Incorrect username or password";
        }
    }
    
    function getData(yourUrl) {
        var Httpreq = new XMLHttpRequest();
    	Httpreq.open("GET", yourUrl, false);
    	Httpreq.send();
    	return Httpreq.responseText;          
    }
</script>

</body>
</html>
