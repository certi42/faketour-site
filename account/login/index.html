<!DOCTYPE html>
<html>
<head>
    <title>Log In | Faketour</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/menu/styles.css">
    <script type="text/javascript" src="/menu/loadMenu.js"></script>
</head>
<iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe" style="display:none;"></iframe>

<body>
<div class="topnav"></div>
<div class="content"></div>
<script type="text/javascript">loadMenu("Log In");</script>
<h2>Log In</h2>
<form onsubmit="login();" target="dummyframe">
    <div class="imgcontainer">
        <img src="login_avatar.png" alt="Avatar" class="avatar">
    </div>
    <div class="container">
        <label for="uname"><b>Username</b></label>
        <input id="uname" type="text" placeholder="Enter Username" name="uname" required>
        <label for="psw"><b>Password</b></label>
        <input id="psw" type="password" placeholder="Enter Password" name="psw" required>
        <button  type="submit">Login</button>
    </div>
</form>
<div class="footer"><a href="https://twitter.com/DaarkenArt">Artwork by @DaarkenArt</a></div>
<script>
    function login() {
        let button = document.getElementById("submit");
        let uname = document.getElementById("uname").value;
        let psw = document.getElementById("psw").value;
        showAlert("Logging in", "", "info");
        getDataWait("login.php?uname=" + uname + "&psw=" + psw, function(response) {
            let loggedIn = JSON.parse(response);
            if(loggedIn) {
                history.back();
                showAlert("Logged in", "Redirecting...", "success");
            } else {
                showAlert("Failed to login", "Incorrect username or password", "error");
            }
        });
    }
</script>

</body>
</html>
